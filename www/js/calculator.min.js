class Calc{constructor(a,b){this.e=a,this.f=b,this.g=document.documentElement.lang,document.getElementById("calc-form").addEventListener("submit",async h=>{let i=this.h.i.j[this.g];i=i.replace("{selection}",this.k()),i=i.replace("{total}",this.l()),document.querySelector('main form input[name="message"]').value=i,0===this.l()?(h.preventDefault(),emptySelection()):document.getElementById("calc-accept").checked||(h.preventDefault(),(await confirmTerms())&&h.target.submit())})}async m(n){this.h=await this.n(n);for(const o in this.h.o){const p=this.h.o[o],q=document.createElement("section"),r=document.createElement("h2");r.innerText=p.p[this.g],q.appendChild(r);const s=document.createElement("div");s.classList.add("uk-child-width-1-1","uk-child-width-1-2@s","uk-child-width-1-4@m"),s.setAttribute("uk-grid",""),q.appendChild(s),p.q.forEach(t=>{const u=document.createElement("article");u.setAttribute("uk-img",""),u.setAttribute("data-src",`${this.h.r}${t.s}`),u.addEventListener("click",v=>{this.t[o]=t,this.f.innerText=this.l(),Array.from(q.querySelectorAll("article")).forEach(w=>{w.classList.remove("selected")}),v.target.classList.add("selected")});const x=document.createElement("h3");x.innerText=t.p[this.g],u.appendChild(x);const y=document.createElement("span");y.innerHTML=`${t.u} &euro;`,u.appendChild(y);const z=document.createElement("span");z.innerHTML=this.h.i.v[this.g],z.classList.add("selected-label"),u.appendChild(z);const A=document.createElement("div");A.appendChild(u),s.appendChild(A)}),this.e.appendChild(q)}}l(){let h=0;for(let i in this.t){const j=this.t[i];h+=j.u}return h}k(){let h="";for(let i in this.t){const j=this.t[i];0!==j.u&&(h+=`\n- ${this.h.o[i].p[this.g]}: ${j.p[this.g]} (${j.u}â‚¬)`)}return h}async n(B){B+=`?${Date.now()}`;var h=null;try{if(!(h=await(await fetch(B)).json()))throw console.error("[calc] malformed data loaded:",h),"malformed data"}catch(i){return console.error(`[calc] failed to load ${B}, reason: ${i}`),void 0}return h}}